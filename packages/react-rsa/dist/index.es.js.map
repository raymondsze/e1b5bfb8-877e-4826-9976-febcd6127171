{"version":3,"file":null,"sources":["../src/decorators/injectReducers.jsx","../src/decorators/injectSagas.jsx","../src/containers/LanguageProvider/constants.js","../src/containers/LanguageProvider/actions.js","../src/containers/LanguageProvider/selectors.js","../src/decorators/withLocale.jsx","../src/containers/LanguageProvider/reducers.js","../src/containers/LanguageProvider/index.jsx","../src/components/ScrollTop/index.jsx","../src/containers/RouteProvider/index.jsx","../src/createReducer.js","../src/configureStore.js","../src/containers/RSAProvider/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction withReducers(asyncReducers) {\n  return Component => (\n    class WithReducers extends React.Component {\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n      };\n      constructor(props, context) {\n        super(props, context);\n        context.store.injectAsyncReducers(asyncReducers);\n      }\n      render() {\n        return <Component {...this.props} />;\n      }\n    }\n  );\n}\n\nexport default withReducers;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction withSagas(asyncSagas) {\n  return Component => (\n    class WithReducers extends React.Component {\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n      };\n      constructor(props, context) {\n        super(props, context);\n        context.store.injectAsyncSagas(asyncSagas);\n      }\n      render() {\n        return <Component {...this.props} />;\n      }\n    }\n  );\n}\n\nexport default withSagas;\n","export const DEFAULT_LOCALE = 'en';\n\nexport const LOCALE_CHANGE = 'LOCALE_CHANGE';\n","import { createActions } from 'redux-actions';\nimport {\n  LOCALE_CHANGE,\n} from './constants';\n\nconst {\n  localeChange,\n} = createActions({\n  [LOCALE_CHANGE]: locale => ({\n    locale,\n  }),\n});\n\n/* eslint-disable import/prefer-default-export */\nexport {\n  localeChange,\n};\n","import { createSelector } from 'reselect';\n\nconst getLanguage = state => state.get('language');\n\nconst getLocale = createSelector(\n  getLanguage,\n  languageState => languageState.get('locale'),\n);\n\nconst getLocaleMessages = createSelector(\n  getLanguage,\n  languageState => languageState.get('messages').toJS(),\n);\n\nexport {\n  getLanguage,\n  getLocale,\n  getLocaleMessages,\n};\n","import { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\n\nimport { localeChange } from '../containers/LanguageProvider/actions';\nimport { getLocale, getLocaleMessages } from '../containers/LanguageProvider/selectors';\n\nconst mapStateToProps = createSelector(\n  getLocale,\n  getLocaleMessages,\n  (locale, messages) => ({ locale, messages }),\n);\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    changeLocale: locale => dispatch(localeChange(locale)),\n  };\n}\n\nfunction withLocale(Component) {\n  return connect(mapStateToProps, mapDispatchToProps)(Component);\n}\n\nexport default withLocale;\n","import { fromJS } from 'immutable';\nimport { handleActions } from 'redux-actions';\n\nimport {\n  DEFAULT_LOCALE,\n  LOCALE_CHANGE,\n} from './constants';\n\nconst initialState = fromJS({\n  locale: DEFAULT_LOCALE,\n   // eslint-disable-next-line no-underscore-dangle\n  messages: global.__messages__ || {},\n});\n\nexport default {\n  language: handleActions({\n    [LOCALE_CHANGE]: (state, { payload }) =>\n      state.set('locale', payload.locale),\n  }, initialState),\n};\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { createSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport { IntlProvider } from 'react-intl';\n\nimport reducers from './reducers';\nimport { getLocale, getLocaleMessages } from './selectors';\nimport { injectReducers } from '../../decorators';\n\nconst mapStateToProps = createSelector(\n  getLocale,\n  getLocaleMessages,\n  (locale, messages) => ({ locale, messages }),\n);\n\nconst withReducers = injectReducers(reducers);\nconst withRedux = connect(mapStateToProps);\n\n// eslint-disable-next-line react/prefer-stateless-function\nclass LanguageProvider extends Component {\n  static propTypes = {\n    locale: PropTypes.string.isRequired,\n    messages: PropTypes.shape({}).isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  render() {\n    const { locale, messages, children } = this.props;\n    return (\n      <IntlProvider\n        key={locale}\n        locale={locale}\n        messages={messages && messages[locale]}\n      >\n        {React.Children.only(children)}\n      </IntlProvider>\n    );\n  }\n}\n\nexport default withReducers(withRedux(LanguageProvider));\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { withRouter } from 'react-router';\n\n// Alternative solution of react-router-scroll for react-router v4\nclass ScrollTop extends React.Component {\n  static propTypes = {\n    location: PropTypes.shape({}).isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      // scroll to top if location is different\n      window.scrollTo(0, 0);\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n\nexport default withRouter(ScrollTop);\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { ConnectedRouter } from 'react-router-redux';\n\nimport ScrollTop from '../../components/ScrollTop';\n\n// eslint-disable-next-line react/prefer-stateless-function\nclass RouteProvider extends Component {\n  static propTypes = {\n    history: PropTypes.shape({}).isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  render() {\n    const { history, children } = this.props;\n    return (\n      <ConnectedRouter history={history}>\n        <ScrollTop>\n          {React.Children.only(children)}\n        </ScrollTop>\n      </ConnectedRouter>\n    );\n  }\n}\n\nexport default RouteProvider;\n","import { fromJS } from 'immutable';\nimport { combineReducers } from 'redux-immutable';\nimport { LOCATION_CHANGE } from 'react-router-redux';\n\n// since react-router-redux reducer does not support immutable data structure\n// we need to customize a new reducer for react-router\n\n// initial state for react-router\nconst routeInitialState = fromJS({\n  locationBeforeTransitions: null,\n});\n\n// the routeReducer\n// LOCATION_CHANGE is dispatched when history changed\nfunction routeReducer(state = routeInitialState, action) {\n  switch (action.type) {\n    case LOCATION_CHANGE:\n      return state.merge({\n        locationBeforeTransitions: action.payload,\n      });\n    default:\n      return state;\n  }\n}\n\n// create reducer\nfunction createReducer(asyncReducers, apolloClient) {\n  return combineReducers({\n    route: routeReducer,\n    apollo: apolloClient.reducer(),\n    ...asyncReducers,\n  });\n}\n\nexport default createReducer;\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport { fromJS } from 'immutable';\nimport { routerMiddleware } from 'react-router-redux';\nimport createSagaMiddleware from 'redux-saga';\nimport createReducer from './createReducer';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport default function configureStore({\n  state = {},\n  client,\n  history,\n  reducers,\n  enhancers,\n}) {\n  // Create the store with two middlewares\n  // 1. sagaMiddleware: Makes redux-sagas work\n  // 2. routerMiddleware: Syncs the location/URL path to the state\n  const middlewares = [\n    sagaMiddleware,\n    routerMiddleware(history),\n    client.middleware(),\n  ];\n\n  const finalEnhancers = [\n    applyMiddleware(...middlewares),\n    ...enhancers,\n  ];\n\n  // If Redux DevTools Extension is installed use it, otherwise use Redux compose\n  /* eslint-disable no-underscore-dangle */\n  const composeEnhancers =\n    // if client side and not in production, enable the redux dev tool\n    process.env.NODE_ENV !== 'production' &&\n    typeof window === 'object' &&\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : compose;\n  /* eslint-enable */\n\n  const store = createStore(\n    createReducer(reducers, client),\n    fromJS(state),\n    composeEnhancers(...finalEnhancers),\n  );\n\n  // Extensions\n  store.runSaga = sagaMiddleware.run;\n\n  // Reducers repository\n  store.asyncReducers = reducers;\n\n  // Create injector functions\n  store.injectAsyncReducers = (asyncReducers) => {\n    store.asyncReducers = {\n      ...store.asyncReducers,\n      ...asyncReducers,\n    };\n    store.replaceReducer(createReducer(store.asyncReducers, client));\n  };\n\n  store.injectAsyncSagas = (sagas) => {\n    sagas.map(store.runSaga);\n  };\n\n  return store;\n}\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { ApolloProvider } from 'react-apollo';\nimport ApolloClient, { createNetworkInterface } from 'apollo-client';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\nimport LanguageProvider from '../LanguageProvider';\nimport RouteProvider from '../RouteProvider';\n\nimport configureStore from '../../configureStore';\n\nconst history = createBrowserHistory();\n\nclass RSAProvider extends Component {\n  static defaultProps = {\n    state: {},\n    client: {\n      networkInterface: createNetworkInterface({\n        uri: '/graphql',\n        opts: {\n          credentials: 'same-origin',\n        },\n      }),\n      reduxRootSelector: state => state.toJS(),\n    },\n    reducers: {},\n    enhancers: [],\n  };\n\n  static propTypes = {\n    state: PropTypes.shape({}).isRequired,\n    client: PropTypes.shape({}).isRequired,\n    reducers: PropTypes.objectOf(PropTypes.func.isRequired),\n    enhancers: PropTypes.arrayOf(PropTypes.func.isRequired),\n    children: PropTypes.element.isRequired,\n  };\n\n  get client() {\n    const { client } = this.props;\n    return new ApolloClient(client);\n  }\n\n  get store() {\n    const client = this.client;\n    const { state, reducers, enhancers } = this.props;\n    return configureStore({ state, history, client, reducers, enhancers });\n  }\n\n  render() {\n    const client = this.client;\n    const store = this.store;\n    const { children } = this.props;\n    return (\n      <ApolloProvider client={client} store={store}>\n        <LanguageProvider>\n          <RouteProvider history={history}>\n            {React.Children.only(children)}\n          </RouteProvider>\n        </LanguageProvider>\n      </ApolloProvider>\n    );\n  }\n}\n\nexport default RSAProvider;\n"],"names":["withReducers","asyncReducers","props","context","store","injectAsyncReducers","Component","React","contextTypes","PropTypes","object","isRequired","withSagas","asyncSagas","injectAsyncSagas","DEFAULT_LOCALE","LOCALE_CHANGE","createActions","localeChange","getLanguage","state","get","getLocale","createSelector","languageState","getLocaleMessages","toJS","mapStateToProps","locale","messages","mapDispatchToProps","dispatch","withLocale","connect","initialState","fromJS","global","__messages__","handleActions","payload","set","injectReducers","reducers","withRedux","LanguageProvider","children","Children","only","propTypes","string","shape","element","ScrollTop","prevProps","location","scrollTo","withRouter","RouteProvider","history","routeInitialState","routeReducer","action","type","LOCATION_CHANGE","merge","createReducer","apolloClient","combineReducers","reducer","sagaMiddleware","createSagaMiddleware","configureStore","client","enhancers","middlewares","routerMiddleware","middleware","finalEnhancers","applyMiddleware","composeEnhancers","env","NODE_ENV","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","runSaga","run","replaceReducer","sagas","map","createBrowserHistory","RSAProvider","ApolloClient","defaultProps","createNetworkInterface","objectOf","func","arrayOf"],"mappings":"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"}